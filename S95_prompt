#!/usr/bin/zsh -f

# The starship config below (the user-unfriendly base64 string) is my personal
# configuration. You can generate your own from presets if you have jq, starship and
# jyt installed. (run "rmi_install_tools" to install jyt and starship from source).
#
#    # I like bracketed segments over powerline
#    starship preset bracketed-segments | jyt t2j > a.json
#    # nerdfont, of course
#    starship preset nerd-font-symbols | jyt t2j > b.json
#    # the "S95_workhere" support
#    echo '{"custom":{"workhere":{"command":"echo \"[î¬° $(echo -n \"$_RMI_WORK_HERE\"|xargs basename)]\"","description":"You are in a WORKHERE environment of this directory","style":"bright-purple","when":"test ! -z \"$_RMI_WORK_HERE\""}}}' > c.json
#    # combine them all into a single config
#    jq -s '.[0] * .[1] * .[2]' a.json b.json c.json | jyt j2t > starship.toml
#
# You might have to manually edit the "format" field in the starship.toml, for
# example, add "${custom.workhere}". See https://starship.rs/config/#prompt for more
# information.

which starship > /dev/null 2>&1
if [[ $? == 0 ]]
then
    if [[ ! -f "$HOME/.config/starship.toml" ]]
    then
        echo -n "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" | base64 -d | gunzip > "$HOME/.config/starship.toml"
    fi
    
    eval "$(starship init zsh)"
else
    source "$HOME/.zsh.d/old_S52_git"
    source "$HOME/.zsh.d/old_S52_swap"
    source "$HOME/.zsh.d/old_S60_prompt"
fi
